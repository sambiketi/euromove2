<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Euromove Admin Dashboard</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f0f2f5; }
header { background:#0057b7; color:white; padding:20px; text-align:center; }
header h1 { margin:0; font-size:1.8rem; }
nav { background:#003f8a; padding:10px; display:flex; gap:10px; flex-wrap:wrap; }
nav a { color:white; text-decoration:none; padding:8px 12px; border-radius:5px; transition:0.3s; }
nav a:hover { background:#ff5f7e; }

section { padding:20px; max-width:1000px; margin:20px auto; background:white; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }

h2 { margin-top:0; color:#0057b7; }

form { display:flex; flex-direction:column; gap:10px; margin-bottom:20px; }
input, select, textarea, button { padding:10px; border-radius:6px; border:1px solid #ccc; font-family:inherit; }
input, select, textarea { width:100%; }
button { background:#0057b7; color:white; font-weight:bold; border:none; cursor:pointer; transition:0.3s; }
button:hover { background:#003f8a; }

.flash { text-align:center; margin-bottom:10px; padding:10px; border-radius:5px; }
.flash-success { background:#d4edda; color:#155724; }
.flash-danger { background:#f8d7da; color:#721c24; }

.table-container { overflow-x:auto; margin-top:20px; }
table { width:100%; border-collapse:collapse; }
th, td { border:1px solid #ccc; padding:8px; text-align:left; }
th { background:#0057b7; color:white; }
td img { max-width:100px; border-radius:5px; }

/* Tabs for dashboard sections */
.tabs { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:20px; }
.tabs button { background:#eee; border:none; padding:10px 15px; cursor:pointer; border-radius:6px; transition:0.3s; }
.tabs button.active { background:#0057b7; color:white; }
</style>
</head>
<body>

<header>
<h1>Admin Dashboard</h1>
</header>

<nav>
  <a href="{{ url_for('admin_logout') }}">Logout</a>
</nav>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash flash-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<section>
<h2>Post New Content</h2>
<form method="post" action="{{ url_for('post_content') }}" enctype="multipart/form-data">
  <input type="text" name="title" placeholder="Post Title" required>
  <textarea name="content" rows="4" placeholder="Post Content" required></textarea>
  <input type="file" name="image" accept="image/*">
  <button type="submit">Post</button>
</form>
</section>

<section>
<h2>Manage Programmes / Courses</h2>
<form method="post" action="{{ url_for('add_programme') }}">
  <input type="text" name="field" placeholder="Programme Field" required>
  <input type="text" name="course" placeholder="Course Name" required>
  <button type="submit">Add Course</button>
</form>
<div class="table-container">
<table>
<tr><th>Field</th><th>Course</th></tr>
{% for field, courses in programmes.items() %}
  {% for course in courses %}
  <tr><td>{{ field }}</td><td>{{ course }}</td></tr>
  {% endfor %}
{% endfor %}
</table>
</div>
</section>

<section>
<h2>Manage Jobs</h2>
<form method="post" action="{{ url_for('add_job') }}">
  <input type="text" name="job_field" placeholder="Job Field" required>
  <input type="text" name="job_name" placeholder="Job Name" required>
  <button type="submit">Add Job</button>
</form>
<div class="table-container">
<table>
<tr><th>Job Field</th><th>Job</th></tr>
{% for field, jobs_list in jobs.items() %}
  {% for job in jobs_list %}
  <tr><td>{{ field }}</td><td>{{ job }}</td></tr>
  {% endfor %}
{% endfor %}
</table>
</div>
</section>

<section>
<h2>Respond to FAQs</h2>
{% for f in faqs %}
<form method="post" action="{{ url_for('answer_faq', faq_id=f.id) }}">
  <p><strong>{{ f.user_name }} asked:</strong> {{ f.question_text }}</p>
  <textarea name="answer" rows="2" placeholder="Write answer here..." required>{{ f.admin_answer or '' }}</textarea>
  <button type="submit">Submit Answer</button>
</form>
<hr>
{% endfor %}
</section>

<section>
<h2>Change Admin Password</h2>
<form method="post" action="{{ url_for('change_password') }}">
  <input type="password" name="current_password" placeholder="Current Password" required>
  <input type="password" name="new_password" placeholder="New Password" required>
  <button type="submit">Change Password</button>
</form>
</section>

</body>
</html>